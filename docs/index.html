from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/')
def home():
    return "Welcome to the Flask App! Use the /predict endpoint to send POST requests."

@app.route('/predict', methods=['POST'])
def predict():
    input_data = request.json
    renewable_energy_share = input_data.get("renewable_energy_share")
    electricity_from_renewables = input_data.get("electricity_from_renewables")
    primary_energy_consumption = input_data.get("primary_energy_consumption")

    if not all([renewable_energy_share, electricity_from_renewables, primary_energy_consumption]):
        return jsonify({"error": "Missing input values"}), 400

    predicted_access = (0.5 * float(renewable_energy_share)) + \
                       (0.3 * float(electricity_from_renewables)) + \
                       (0.2 * float(primary_energy_consumption))

    return jsonify({
        "renewable_energy_share": renewable_energy_share,
        "electricity_from_renewables": electricity_from_renewables,
        "primary_energy_consumption": primary_energy_consumption,
        "predicted_electricity_access": predicted_access
    })

if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=8080)
